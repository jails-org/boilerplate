mixin js()
	script(type="text/javascript").
		var Whitelabel = !{JSON.stringify(Whitelabel)};
	script(type="text/javascript" src=`${Whitelabel.metadata.assetsPath}js/main.js?v=${Whitelabel.metadata.hash}` defer)
	script(type="text/javascript" src=`${Whitelabel.metadata.assetsPath}js/${Whitelabel.props.page}.js?v=${Whitelabel.metadata.hash}` defer)

mixin css()
	link( rel="stylesheet" href=`${Whitelabel.metadata.assetsPath}css/${Whitelabel.props.page}.css?v=${Whitelabel.metadata.hash}` )

mixin log( variable )
	if Whitelabel.metadata.mode != 'production'
		script.
			console.groupCollapsed('[WHITELABEL] - Server Logging')
			console.log(!{JSON.stringify(variable)})
			console.groupEnd()

mixin svg-sprite()
	script(type="text/javascript").
		!(function(){
			var request = new XMLHttpRequest();
			request.onload = function(e) {
				var wrapper = document.createElement('div');
				wrapper.id = 'svg-sprite';
				wrapper.innerHTML = request.responseText;
				wrapper.style.display = 'none';
				document.body.insertBefore(wrapper, document.body.childNodes[0]);
			};
			request.open("GET", '#{Whitelabel.metadata.assetsFolder}icons/sprite.svg?v=#{Whitelabel.metadata.hash}', true);
			request.send();
		})();

mixin image( url, alt, lazyload = true )

	- const isExternal = /http/.test(url)
	- const src = isExternal ? url : require(`assets/images/${url}`).default

	if lazyload
		img.image.lazyload( data-src=src alt=alt data-static )&attributes(attributes)
	else
		img.image( src=src alt=alt data-static )&attributes(attributes)

mixin link-to( page, text = 'text to link-to' )

	- const route = Whitelabel.props.routes.find( route => route.page == page )
	- const active = route.page == page? 'active' : ''

	a( href=route.path class=active )&attributes(attributes)=text
		block

mixin icon( name )
	svg
		use( xlink:href=`#${name}` )
